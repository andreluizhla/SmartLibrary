{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}Cadastro{% endblock %}

{% block main_content %}
    <h1>Cadastro de Usu√°rio</h1>
    <form method="POST" id="userForm">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-primary" type="submit">Cadastrar</button>
    </form>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userTypeField = document.getElementById('id_type_user');
            const cgmField = document.getElementById('div_id_cgm');
            
            function toggleCgmField() {
                if (userTypeField.value === '0') { // Leitor
                    cgmField.style.display = 'block';
                } else {
                    cgmField.style.display = 'none';
                }
            }
            
            // Inicializa
            toggleCgmField();
            
            // Atualiza quando o tipo muda
            userTypeField.addEventListener('change', toggleCgmField);
        });
    </script>
{% endblock %}