{%extends "base.html"%}

{% block title %}
    Itens Acervo
{% endblock title %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url "home_page" %}">Início</a></li>
        <li class="breadcrumb-item active" aria-current="page">Itens Acervo</li>
    </ol>
{% endblock breadcrumbs %}

{% block main_content %}
    <h1>Itens Acervo {% if user.type_user == 2 %} <a href="{% url "collection_item_create" %}" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" data-bs-title="Cadastrar Item de Acervo"><i class="bi bi-plus-circle"></i></a>{% endif %}</h1>
        {% comment %} <div class="dropdown p-2">
            <p class="dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Tipo </p>
            <ul class="dropdown-menu">
                {% for type_value, type_name in collection_types %}
                <li class="dropdown-item p-2"><a href="?type={{type_value}}">{{type_name}}</a></li>
                {% endfor %}
            </ul>
        </div> {% endcomment %}
        <div class="btn-group mb-4" role="group">
            {% for type_value, type_name in collection_types %}
            <a href="?type={{type_value}}" class="btn btn-sm {% if selected_type == type_value %}btn-primary{% else %}btn-outline-primary{% endif %}">{{type_name}}</a>
            {% endfor %}
        </div>
        {% comment %} <div class="mb-2 pagination">
            {% if page_obj.has_previous %}
                    <a class="page-item page-link" href="?page=1"><i class="bi bi-chevron-double-left"></i></a>
                {% endif %}
                <a class="page-item page-link" href="?page={{page_obj.number}}">{{page_obj.number}}</a>
                {% if page_obj.has_next %}
                    <a class="page-item page-link" href="?page={{page_obj.paginator.num_pages}}"><i class="bi bi-chevron-double-right"></i></a>
                {% endif %}
        </div> {% endcomment %}
    <div class="table-responsive" id="id-equipment-table">
        <table class="table table-striped table-hover table-sm">
            <thead>
                <tr>
                    {% if selected_type == 0 %}
                        <th>ISBN</th>
                        <th>TÍTULO</th>
                        <th>AUTOR</th>
                        <th>EDITORA</th>
                        <th>ANO</th>
                    {% else %}
                        <th>NÚMERO DE SÉRIE</th>
                        <th>MODELO/MARCA</th>
                        <th>ESPECIFICAÇÃO</th>
                    {% endif %}
                    <th>DISPONIBILIDADE</th>
                    <th>ESTADO</th>
                    {% if user.type_user == 2 %}
                    <th>AÇÕES</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for item in items_list %}
                <tr>
                    {% if selected_type == 0 %}
                        <td>{{item.isbn_display}}</td>
                        <td>{{item.title}}</td>
                        <td>{{item.author}}</td>
                        <td>{{item.publisher}}</td>
                        <td>{{item.year_pub}}</td>
                    {% else %}
                        <td>{{item.serial_number}}</td>
                        <td>{{item.brand}}</td>
                        <td>{{item.specifications|truncatechars:50}}</td>
                    {% endif %}
                    <td>{{item.availability_display}}</td>
                    <td>{{item.preservation_display}}</td>
                    {% if user.type_user == 2 %}
                    <td>
                        <div class="btn-group">
                            <a href="{% url 'collection_item_update' item.id %}" class="btn btn-sm btn-primary" title="Editar Item" data-bs-toggle="tooltip" data-bs-title="Editar Item">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <a href="{% url "collection_item_delete" item.id %}"class="btn btn-sm btn-danger" title="Excluir" data-bs-toggle="tooltip" data-bs-title="Excluir Item" >
                                <i class="bi bi-trash"></i>
                            </a>
                        </div>
                    </td>
                    {% endif %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="{% if selected_type == 0 %} 8 {% else %} 6 {% endif %}" class="text-center">Nenhum item encontrado</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="pagination">
        <div class="d-flex mx-auto mb-2">
            
        </div>
    </div>
{% endblock main_content %}